{"version":3,"file":"main.js","sources":["webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/config.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/utils.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/debug.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/device.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/event.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/filesystem.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/installer.js","webpack://omusic-helper/webpack/runtime/rspack_version","webpack://omusic-helper/webpack/runtime/rspack_unique_id","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/interconnect.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/lifecycle.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/native.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/network.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/provider.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/thirdpartyapp.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/impls/ui.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/index.js","webpack://omusic-helper/./node_modules/.pnpm/astrobox-plugin-sdk@1.1.4/node_modules/astrobox-plugin-sdk/dist/init.js","webpack://omusic-helper/./src/index.ts"],"sourcesContent":["export function read() {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.readConfig) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(globalThis.AstroBox.config.readConfig());\n    }\n    else {\n        throw new Error('AstroBox.config.readConfig not available on native side');\n    }\n}\nexport function write(content) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.writeConfig) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.config.writeConfig(JSON.stringify(content));\n    }\n    else {\n        throw new Error('AstroBox.config.writeConfig not available on native side');\n    }\n}\n","export function uint8ArrayToBase64(bytes) {\n    const base64abc = [\n        \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\",\n        \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\",\n        \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\",\n        \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n        \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"+\", \"/\"\n    ];\n    let result = '', i;\n    const l = bytes.length;\n    for (i = 2; i < l; i += 3) {\n        result += base64abc[bytes[i - 2] >> 2];\n        result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\n        result += base64abc[((bytes[i - 1] & 0x0f) << 2) | (bytes[i] >> 6)];\n        result += base64abc[bytes[i] & 0x3f];\n    }\n    if (i === l + 1) {\n        result += base64abc[bytes[i - 2] >> 2];\n        result += base64abc[(bytes[i - 2] & 0x03) << 4];\n        result += '==';\n    }\n    if (i === l) {\n        result += base64abc[bytes[i - 2] >> 2];\n        result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\n        result += base64abc[(bytes[i - 1] & 0x0f) << 2];\n        result += '=';\n    }\n    return result;\n}\nexport function base64ToUint8Array(base64) {\n    base64 = base64.replace(/[\\r\\n\\s]/g, '');\n    if (base64.length % 4 !== 0) {\n        throw new Error('Invalid base64 string length');\n    }\n    const table = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    let padding = 0;\n    if (base64.endsWith('=='))\n        padding = 2;\n    else if (base64.endsWith('='))\n        padding = 1;\n    const byteLength = (base64.length / 4) * 3 - padding;\n    const arr = new Uint8Array(byteLength);\n    let byteIdx = 0;\n    for (let i = 0; i < base64.length; i += 4) {\n        const n = (table.indexOf(base64[i]) << 18) |\n            (table.indexOf(base64[i + 1]) << 12) |\n            (table.indexOf(base64[i + 2]) << 6) |\n            table.indexOf(base64[i + 3]);\n        if (byteIdx < byteLength)\n            arr[byteIdx++] = (n >> 16) & 0xff;\n        if (byteIdx < byteLength)\n            arr[byteIdx++] = (n >> 8) & 0xff;\n        if (byteIdx < byteLength)\n            arr[byteIdx++] = n & 0xff;\n    }\n    return arr;\n}\nexport function uint8ArrayToString(arr) {\n    let out = '';\n    let i = 0;\n    while (i < arr.length) {\n        const byte1 = arr[i++];\n        if (byte1 < 0x80) {\n            out += String.fromCharCode(byte1);\n        }\n        else if (byte1 >= 0xc0 && byte1 < 0xe0) {\n            const byte2 = arr[i++];\n            out += String.fromCharCode(((byte1 & 0x1f) << 6) | (byte2 & 0x3f));\n        }\n        else if (byte1 >= 0xe0 && byte1 < 0xf0) {\n            const byte2 = arr[i++];\n            const byte3 = arr[i++];\n            out += String.fromCharCode(((byte1 & 0x0f) << 12) | ((byte2 & 0x3f) << 6) | (byte3 & 0x3f));\n        }\n        else {\n            // 4字节转为utf-16代理对\n            const byte2 = arr[i++];\n            const byte3 = arr[i++];\n            const byte4 = arr[i++];\n            let codepoint = ((byte1 & 0x07) << 18) |\n                ((byte2 & 0x3f) << 12) |\n                ((byte3 & 0x3f) << 6) |\n                (byte4 & 0x3f);\n            codepoint -= 0x10000;\n            out += String.fromCharCode(0xd800 + (codepoint >> 10), 0xdc00 + (codepoint & 0x3ff));\n        }\n    }\n    return out;\n}\nexport function stringToUint8Array(str) {\n    const arr = [];\n    for (let i = 0; i < str.length; i++) {\n        let code = str.charCodeAt(i);\n        if (code < 0x80) {\n            arr.push(code);\n        }\n        else if (code < 0x800) {\n            arr.push(0xc0 | (code >> 6));\n            arr.push(0x80 | (code & 0x3f));\n        }\n        else if (code >= 0xd800 && code <= 0xdbff) {\n            // 代理对\n            const next = str.charCodeAt(++i);\n            const codepoint = ((code - 0xd800) << 10) + (next - 0xdc00) + 0x10000;\n            arr.push(0xf0 | (codepoint >> 18));\n            arr.push(0x80 | ((codepoint >> 12) & 0x3f));\n            arr.push(0x80 | ((codepoint >> 6) & 0x3f));\n            arr.push(0x80 | (codepoint & 0x3f));\n        }\n        else {\n            arr.push(0xe0 | (code >> 12));\n            arr.push(0x80 | ((code >> 6) & 0x3f));\n            arr.push(0x80 | (code & 0x3f));\n        }\n    }\n    return new Uint8Array(arr);\n}\n","import { uint8ArrayToBase64 } from \"../utils.js\";\nexport async function sendRaw(data) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.debug) === null || _b === void 0 ? void 0 : _b.sendRaw) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.debug.sendRaw(uint8ArrayToBase64(data));\n    }\n    else {\n        throw new Error('AstroBox.debug.sendRaw not available on native side');\n    }\n}\n","export function getDeviceList() {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.getDeviceList) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(globalThis.AstroBox.device.getDeviceList());\n    }\n    else {\n        throw new Error('AstroBox.device.getDeviceList not available on native side');\n    }\n}\nexport function getDeviceState(addr) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.getDeviceState) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(globalThis.AstroBox.device.getDeviceState(addr));\n    }\n    throw new Error(\"AstroBox.device.getDeviceState not available on native side\");\n}\nexport function modifyDeviceState(addr, state) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.modifyDeviceState) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.device.modifyDeviceState(addr, JSON.stringify(state));\n    }\n    else {\n        throw new Error(\"AstroBox.device.modifyDeviceState not available on native side\");\n    }\n}\nexport async function disconnectDevice() {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.disconnectDevice) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.device.disconnectDevice();\n    }\n    else {\n        throw new Error(\"AstroBox.device.disconnectDevice not available on native side\");\n    }\n}\n","export function addEventListener(eventName, callback) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.addEventListener) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.event.addEventListener(eventName, callback);\n    }\n    else {\n        throw new Error(\"AstroBox.event.addEventListener not available\");\n    }\n}\nexport function removeEventListener(eventName) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.removeEventListener) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.event.removeEventListener(eventName);\n    }\n    else {\n        throw new Error(\"AstroBox.event.removeEventListener not available\");\n    }\n}\nexport function sendEvent(eventName, payload) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.sendEvent) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.event.sendEvent(eventName, payload);\n    }\n    else {\n        throw new Error(\"AstroBox.event.sendEvent not available\");\n    }\n}\n","import { base64ToUint8Array } from \"../utils.js\";\nexport async function pickFile(options) {\n    var _a, _b;\n    const options_ = {\n        decode_text: false,\n        encoding: \"undefined\",\n        ...options\n    };\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.filesystem) === null || _b === void 0 ? void 0 : _b.pickFile) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(await globalThis.AstroBox.filesystem.pickFile(JSON.stringify(options_)));\n    }\n    else {\n        throw new Error(\"AstroBox.filesystem.pickFile not available\");\n    }\n}\nexport async function readFile(path, options) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.filesystem) === null || _b === void 0 ? void 0 : _b.readFile) === \"function\") {\n        let options_ = {\n            offset: 0,\n            decode_text: true,\n            ...options\n        };\n        // @ts-ignore\n        var result = await globalThis.AstroBox.filesystem.readFile(path, JSON.stringify(options_));\n        if (options_.decode_text) {\n            return result;\n        }\n        return base64ToUint8Array(result);\n    }\n    else {\n        throw new Error(\"AstroBox.filesystem.readFile not available\");\n    }\n}\nexport async function unloadFile(path) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.filesystem) === null || _b === void 0 ? void 0 : _b.unloadFile) === \"function\") {\n        // @ts-ignore\n        return await globalThis.AstroBox.filesystem.unloadFile(path);\n    }\n    else {\n        throw new Error(\"AstroBox.filesystem.unloadFile not available\");\n    }\n}\n","// @ts-ignore\nfunction call(name, file) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.installer) === null || _b === void 0 ? void 0 : _b[name]) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.installer[name](file);\n    }\n    else {\n        // @ts-ignore\n        throw new Error(`AstroBox.installer.${name} not available`);\n    }\n}\nexport const addThirdPartyAppToQueue = (f) => call(\"addThirdPartyAppToQueue\", f);\nexport const addWatchFaceToQueue = (f) => call(\"addWatchFaceToQueue\", f);\nexport const addFirmwareToQueue = (f) => call(\"addFirmwareToQueue\", f);\n","__webpack_require__.rv = () => (\"1.4.6\")","__webpack_require__.ruid = \"bundler=rspack@1.4.6\";\n","export async function sendQAICMessage(pkgName, data) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.interconnect) === null || _b === void 0 ? void 0 : _b.sendQAICMessage) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.interconnect.sendQAICMessage(pkgName, data);\n    }\n    else {\n        throw new Error(\"AstroBox.interconnect.sendQAICMessage not available\");\n    }\n}\n","export function onLoad(cb) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.lifecycle) === null || _b === void 0 ? void 0 : _b.onLoad) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.lifecycle.onLoad(cb);\n    }\n    else {\n        throw new Error(\"AstroBox.lifecycle.onLoad not available\");\n    }\n}\n","export function regNativeFun(func) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.native) === null || _b === void 0 ? void 0 : _b.regNativeFun) === \"function\") {\n        // @ts-ignore\n        return globalThis.AstroBox.native.regNativeFun(func);\n    }\n    throw new Error(\"AstroBox.native.regNativeFun not available\");\n}\n","import { base64ToUint8Array, uint8ArrayToBase64 } from \"../utils.js\";\nexport async function fetch(url, options) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.network) === null || _b === void 0 ? void 0 : _b.fetch) === \"function\") {\n        // @ts-ignore\n        options.body = uint8ArrayToBase64(options.body);\n        // @ts-ignore\n        let ret = await globalThis.AstroBox.network.fetch(url, JSON.stringify(options));\n        ret.body = base64ToUint8Array(ret.body);\n        return ret;\n    }\n    throw new Error(\"AstroBox.network.fetch not available\");\n}\n","export async function registerCommunityProvider(provider) {\n    var _a, _b;\n    // @ts-ignore\n    if (\n    // @ts-ignore\n    typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.provider) === null || _b === void 0 ? void 0 : _b.registerCommunityProvider) ===\n        \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.provider.registerCommunityProvider(JSON.stringify(provider));\n    }\n    else {\n        throw new Error(\"AstroBox.provider.registerCommunityProvider not available\");\n    }\n}\n","export async function launchQA(appInfo, pageName) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.thirdpartyapp) === null || _b === void 0 ? void 0 : _b.launchQA) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.thirdpartyapp.launchQA(JSON.stringify(appInfo), pageName);\n    }\n    else {\n        throw new Error(\"AstroBox.thirdpartyapp.launchQA not available\");\n    }\n}\nexport async function getThirdPartyAppList() {\n    var _a, _b;\n    // @ts-ignore\n    if (\n    // @ts-ignore\n    typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.thirdpartyapp) === null || _b === void 0 ? void 0 : _b.getThirdPartyAppList) ===\n        \"function\") {\n        // @ts-ignore\n        const raw = await globalThis.AstroBox.thirdpartyapp.getThirdPartyAppList();\n        return JSON.parse(raw);\n    }\n    throw new Error(\"AstroBox.thirdpartyapp.getThirdPartyAppList not available\");\n}\n","// @ts-ignore\nfunction call(name, arg) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.ui) === null || _b === void 0 ? void 0 : _b[name]) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.ui[name](arg);\n    }\n    else {\n        // @ts-ignore\n        throw new Error(`AstroBox.ui.${name} not available`);\n    }\n}\nexport const updatePluginSettingsUI = (ui) => call(\"updatePluginSettingsUI\", JSON.stringify(ui));\nexport const openPageWithNodes = (ui) => call(\"openPageWithNodes\", JSON.stringify(ui));\nexport const openPageWithUrl = (url) => call(\"openPageWithUrl\", url);\n","import { initApis } from \"./init.js\";\nconst AstroBox = {};\ninitApis(AstroBox);\nexport default AstroBox;\n","import * as configImpl from \"./impls/config.js\";\nimport * as debugImpl from \"./impls/debug.js\";\nimport * as deviceImpl from \"./impls/device.js\";\nimport * as eventImpl from \"./impls/event.js\";\nimport * as filesystemImpl from \"./impls/filesystem.js\";\nimport * as installerImpl from \"./impls/installer.js\";\nimport * as interconnectImpl from \"./impls/interconnect.js\";\nimport * as lifecycleImpl from \"./impls/lifecycle.js\";\nimport * as nativeImpl from \"./impls/native.js\";\nimport * as networkImpl from \"./impls/network.js\";\nimport * as providerImpl from \"./impls/provider.js\";\nimport * as thirdpartyImpl from \"./impls/thirdpartyapp.js\";\nimport * as uiImpl from \"./impls/ui.js\";\nexport function initApis(AstroBox) {\n    // Config APIs\n    AstroBox.config = {};\n    AstroBox.config.readConfig = configImpl.read;\n    AstroBox.config.writeConfig = configImpl.write;\n    // Debug APIs\n    AstroBox.debug = {};\n    AstroBox.debug.sendRaw = debugImpl.sendRaw;\n    // Device APIs\n    AstroBox.device = {};\n    AstroBox.device.getDeviceList = deviceImpl.getDeviceList;\n    AstroBox.device.getDeviceState = deviceImpl.getDeviceState;\n    AstroBox.device.modifyDeviceState = deviceImpl.modifyDeviceState;\n    AstroBox.device.disconnectDevice = deviceImpl.disconnectDevice;\n    // Event APIs\n    AstroBox.event = {};\n    AstroBox.event.addEventListener = eventImpl.addEventListener;\n    AstroBox.event.removeEventListener = eventImpl.removeEventListener;\n    AstroBox.event.sendEvent = eventImpl.sendEvent;\n    // Installer APIs\n    AstroBox.installer = {};\n    AstroBox.installer.addThirdPartyAppToQueue = installerImpl.addThirdPartyAppToQueue;\n    AstroBox.installer.addWatchFaceToQueue = installerImpl.addWatchFaceToQueue;\n    AstroBox.installer.addFirmwareToQueue = installerImpl.addFirmwareToQueue;\n    // Interconnect APIs\n    AstroBox.interconnect = {};\n    AstroBox.interconnect.sendQAICMessage = interconnectImpl.sendQAICMessage;\n    // Lifecycle APIs\n    AstroBox.lifecycle = {};\n    AstroBox.lifecycle.onLoad = lifecycleImpl.onLoad;\n    // Native APIs\n    AstroBox.native = {};\n    AstroBox.native.regNativeFun = nativeImpl.regNativeFun;\n    // Network APIs\n    AstroBox.network = {};\n    AstroBox.network.fetch = networkImpl.fetch;\n    // Provider APIs\n    AstroBox.provider = {};\n    AstroBox.provider.registerCommunityProvider = providerImpl.registerCommunityProvider;\n    // Third-Party App APIs\n    AstroBox.thirdpartyapp = {};\n    AstroBox.thirdpartyapp.launchQA = thirdpartyImpl.launchQA;\n    AstroBox.thirdpartyapp.getThirdPartyAppList = thirdpartyImpl.getThirdPartyAppList;\n    // UI APIs\n    AstroBox.ui = {};\n    AstroBox.ui.updatePluginSettingsUI = uiImpl.updatePluginSettingsUI;\n    AstroBox.ui.openPageWithNodes = uiImpl.openPageWithNodes;\n    AstroBox.ui.openPageWithUrl = uiImpl.openPageWithUrl;\n    // FileSystem APIs\n    AstroBox.filesystem = {};\n    AstroBox.filesystem.pickFile = filesystemImpl.pickFile;\n    AstroBox.filesystem.readFile = filesystemImpl.readFile;\n    AstroBox.filesystem.unloadFile = filesystemImpl.unloadFile;\n}\n","import AstroBox, { PluginUINode } from \"astrobox-plugin-sdk\";\n\n// --- 1. 定义常量和类型 ---\n\nconst WATCH_APP_PKG_NAME = \"moe.orpu.omusic\"; // **注意**: 包名已根据您的反馈修正\nconst CONFIG_KEY_COOKIE = \"savedCookie\";\n\ninterface PluginConfig {\n    [CONFIG_KEY_COOKIE]?: string;\n}\n\nlet currentCookieInput: string = \"\";\n\n// --- 2. 业务逻辑函数 ---\n\n/**\n * **核心修改**: 智能提取 MUSIC_U\n * 既能处理完整 cookie 字符串，也能处理用户直接粘贴的 MUSIC_U 值\n */\nfunction extractMusicUCookie(fullCookie: string): string | null {\n    if (!fullCookie || typeof fullCookie !== 'string') {\n        return null;\n    }\n\n    const trimmedCookie = fullCookie.trim();\n\n    // 场景1: 用户粘贴了完整的 cookie 字符串，我们需要用正则提取\n    const match = trimmedCookie.match(/(MUSIC_U=[^;]+)/);\n    if (match && match[0]) {\n        return match[0];\n    }\n\n    // 场景2: 用户只粘贴了 MUSIC_U 的值 (不包含 \"MUSIC_U=\")\n    // 我们可以通过一些特征判断，比如它是一长串大写字母和数字\n    if (/^[A-Z0-9]{100,}$/.test(trimmedCookie)) {\n        console.log(\"检测到可能为纯 MUSIC_U 值，自动补全。\");\n        return `MUSIC_U=${trimmedCookie}`;\n    }\n    \n    return null; // 如果两种情况都不匹配，则返回 null\n}\n\n/**\n * **核心修改**: 更新状态时，必须包含所有需要保持可见的节点\n */\nfunction updateStatus(status: 'default' | 'processing' | 'success' | 'error', message?: string) {\n    // 准备所有需要保持可见的节点\n    const commonNodes: PluginUINode[] = [\n        {\n            node_id: \"cookie_input\",\n            visibility: true,\n            disabled: false,\n            content: { type: \"Input\", value: { text: currentCookieInput, callback_fun_id: inputChangeFunId } }\n        },\n        {\n            node_id: \"sync_button\",\n            visibility: true,\n            disabled: false,\n            content: { type: \"Button\", value: { primary: true, text: \"同步到手表\", callback_fun_id: syncFunId } }\n        }\n    ];\n\n    // 准备所有状态文本节点，并根据当前状态设置其可见性\n    const statusNodes: PluginUINode[] = [\n        {\n            node_id: \"status_text_default\",\n            visibility: status === 'default',\n            disabled: false,\n            content: { type: \"Text\", value: currentCookieInput ? \"已加载上次保存的 Cookie，可直接同步。\" : \"请从浏览器开发者工具获取 Cookie 并粘贴。\" }\n        },\n        {\n            node_id: \"status_text_processing\",\n            visibility: status === 'processing',\n            disabled: false,\n            content: { type: \"Text\", value: message || \"处理中...\" }\n        },\n        {\n            node_id: \"status_text_success\",\n            visibility: status === 'success',\n            disabled: false,\n            content: { type: \"Text\", value: \"同步成功！\" }\n        },\n        {\n            node_id: \"status_text_error\",\n            visibility: status === 'error',\n            disabled: false,\n            content: { type: \"Text\", value: `错误：${message || '未知错误'}` }\n        }\n    ];\n\n    // 将通用节点和状态节点合并，一次性更新所有UI\n    AstroBox.ui.updatePluginSettingsUI([...commonNodes, ...statusNodes]);\n}\n\nfunction onCookieInputChange(inputValue: string) {\n    console.log(\"输入框内容变化:\", inputValue);\n    currentCookieInput = inputValue;\n    \n    try {\n        const cfg = AstroBox.config.readConfig() as PluginConfig;\n        AstroBox.config.writeConfig({\n            ...cfg,\n            [CONFIG_KEY_COOKIE]: inputValue\n        });\n        console.log(\"Cookie 已实时保存到配置。\");\n    } catch (error) {\n        console.error(\"实时保存 Cookie 到配置失败:\", error);\n    }\n}\n\nasync function handleSync() {\n    const cookieInput = currentCookieInput;\n    \n    updateStatus('processing', \"正在提取凭证...\");\n\n    if (!cookieInput) {\n        updateStatus('error', \"输入框内容为空。\");\n        return;\n    }\n\n    const musicUCookie = extractMusicUCookie(cookieInput);\n\n    if (!musicUCookie) {\n        updateStatus('error', \"凭证格式无效，请检查输入。\");\n        return;\n    }\n\n    updateStatus('processing', \"凭证提取成功，正在发送到手表...\");\n    \n    try {\n        await AstroBox.interconnect.sendQAICMessage(\n            WATCH_APP_PKG_NAME,\n            musicUCookie\n        );\n        updateStatus('success');\n\n        setTimeout(() => {\n            updateStatus('default');\n        }, 3000);\n\n    } catch (error) {\n        updateStatus('error', \"发送失败，请检查手表连接和应用是否打开。\");\n    }\n}\n\n// --- 3. 注册原生函数 ---\n\nconst syncFunId = AstroBox.native.regNativeFun(handleSync);\nconst inputChangeFunId = AstroBox.native.regNativeFun(onCookieInputChange);\n\n\n// --- 4. 插件生命周期 ---\n\nAstroBox.lifecycle.onLoad(() => {\n    console.log(\"OMusic Helper 插件已加载...\");\n\n    try {\n        const cfg = AstroBox.config.readConfig() as PluginConfig;\n        if (cfg && cfg[CONFIG_KEY_COOKIE]) {\n            currentCookieInput = cfg[CONFIG_KEY_COOKIE]!;\n            console.log(\"成功从配置中加载已保存的 Cookie。\");\n        }\n    } catch (error) {\n        console.error(\"读取插件配置失败:\", error);\n    }\n\n    // 初始渲染时，直接调用 updateStatus 来构建完整的 UI\n    updateStatus('default');\n    console.log(\"UI 已初始渲染。\");\n});\n"],"names":["read","_a","_b","globalThis","JSON","Error","write","content","uint8ArrayToBase64","bytes","base64abc","result","i","l","base64ToUint8Array","base64","table","padding","byteLength","arr","Uint8Array","byteIdx","n","sendRaw","data","getDeviceList","getDeviceState","addr","modifyDeviceState","state","disconnectDevice","addEventListener","eventName","callback","removeEventListener","sendEvent","payload","pickFile","options","options_","readFile","path","unloadFile","call","name","file","addThirdPartyAppToQueue","f","addWatchFaceToQueue","addFirmwareToQueue","sendQAICMessage","pkgName","onLoad","cb","regNativeFun","func","fetch","url","ret","registerCommunityProvider","provider","launchQA","appInfo","pageName","getThirdPartyAppList","arg","updatePluginSettingsUI","ui","openPageWithNodes","openPageWithUrl","AstroBox","initApis","configImpl","debugImpl","deviceImpl","eventImpl","installerImpl","interconnectImpl","lifecycleImpl","nativeImpl","networkImpl","providerImpl","thirdpartyImpl","uiImpl","filesystemImpl","CONFIG_KEY_COOKIE","currentCookieInput","updateStatus","status","message","commonNodes","inputChangeFunId","syncFunId","statusNodes","handleSync","cookieInput","musicUCookie","extractMusicUCookie","fullCookie","trimmedCookie","match","console","setTimeout","error","inputValue","cfg"],"mappings":"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"}